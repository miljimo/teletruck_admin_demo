(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d70c7"],{"74c7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?t._e():a("div",[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-md-3 col-8"},[a("div",{staticClass:"text-right"},[a("vs-button",{staticClass:"ml-5",attrs:{color:"dark",type:"filled"},on:{click:function(e){t.addData=!0}}},[t._v("Add New")])],1)])]),a("div",{staticClass:"mt-5"},[a("vs-card",[a("div",{staticClass:"p-2"},[a("div",{staticClass:"mb-4"},[a("p",{staticClass:"font-bold lead"},[t._v("All")])]),a("vs-table",{attrs:{id:"div-with-loading","max-items":"10",data:t.contents.data,search:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,(function(e,s){return a("vs-tr",{key:s},[a("vs-td",{attrs:{data:i[s].id}},[t._v("\n                "+t._s(t.moment.utc(new Date(i[s].created_at)).format("dddd, MMM Do 'YY"))+"\n              ")]),a("vs-td",{attrs:{data:i[s].name}},[a("span",{staticClass:"font-bold text-primary",on:{click:function(e){return t.viewAllPrices(i[s])}}},[t._v("\n                  "+t._s(i[s].name))])]),i[s].category?a("vs-td",{attrs:{data:i[s].category.name}},[a("span",{staticClass:"text-small"},[t._v("\n                  "+t._s(t._f("capitalize")(i[s].category.name))+"\n                ")])]):t._e(),i[s].category?a("vs-td",{attrs:{data:i[s].category.si_unit}},[a("span",{staticClass:"text-small"},[t._v("\n                  "+t._s(t._f("capitalize")(i[s].category.si_unit))+"\n                ")])]):t._e(),i[s].category?a("vs-td",[a("span",{staticClass:"text-small"},[t._v("\n                  "+t._s(t._f("capitalize")(i[s].category.pricing.length))+"\n                  Prices\n                ")])]):t._e(),a("vs-td",[a("vs-button",{staticClass:"mr-2 mb-2",attrs:{size:"small"},on:{click:function(e){return t.viewAllPrices(i[s].category)}}},[t._v("View Prices")]),a("vs-button",{attrs:{to:"/material/"+i[s].id,size:"small",color:"dark"}},[t._v("View Material")])],1)],1)}))}}],null,!1,556451199)},[a("template",{slot:"thead"},[a("vs-th",[t._v(" Created ")]),a("vs-th",[t._v(" Name ")]),a("vs-th",[t._v(" Category ")]),a("vs-th",[t._v(" SI Unit ")]),a("vs-th",[t._v(" Pricing")]),a("vs-th",[t._v(" Action ")])],1)],2),t.contents?a("vs-pagination",{staticClass:"mt-4",attrs:{total:Math.ceil(t.contents.total/10)},model:{value:t.table_options.current_page,callback:function(e){t.$set(t.table_options,"current_page",e)},expression:"table_options.current_page"}}):t._e()],1)])],1),a("vs-popup",{staticClass:"addPopup",attrs:{title:"Add Material",active:t.addData},on:{"update:active":function(e){t.addData=e}}},[a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[a("div",{staticClass:"py-3"},[a("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Enter material name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("div",{staticClass:"py-3"},[a("label",{staticClass:"text-small"},[t._v("Description")]),a("vs-textarea",{staticClass:"w-full mb-0",model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("div",{staticClass:"py-3"},[a("vs-select",{staticClass:"w-full",attrs:{label:"Select Category"},model:{value:t.category_id,callback:function(e){t.category_id=e},expression:"category_id"}},t._l(t.categories,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:""+t.name}})})),1)],1),a("div",{staticClass:"py-3"},[a("vs-input",{staticClass:"w-full mt-5",attrs:{type:"file",multiple:"",accept:"image/*",label:"Material Images"},on:{change:function(e){return t.addImages(e)}}})],1),a("div",{staticClass:"mt-10"},[a("vs-button",{staticClass:"w-full my-3",attrs:{color:"dark",type:"filled"},on:{click:t.submitForm}},[t._v("Add material")]),a("vs-button",{staticClass:"w-full mb-2",attrs:{color:"dark",type:"flat"},on:{click:function(e){t.addData=!1}}},[t._v("Cancel")])],1)])])]),a("vs-popup",{staticClass:"addPopup",attrs:{title:"Pricing for "+t.viewPreview.name,active:t.previewPop},on:{"update:active":function(e){t.previewPop=e}}},[a("div",[a("div",{staticClass:"py-3"},t._l(t.viewPreview.pricing,(function(e,i){return a("div",{key:i,staticStyle:{"border-bottom":"1px solid gainsboro","padding-bottom":"6px","margin-bottom":"16px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7"},[a("p",{staticClass:"text-small mb-1 text-gray"},[t._v("\n                Size - "+t._s(e.size)+"\n              ")]),a("p",[t._v(t._s(t._f("currency")(e.price,"â‚¦",0)))])]),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"text-right"})])])])})),0),a("div",{staticClass:"mt-10"},[a("vs-button",{staticClass:"w-full mb-2",attrs:{color:"dark",type:"flat"},on:{click:function(e){t.previewPop=!1}}},[t._v("Cancel")])],1)])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-9 col-4"},[a("h3",{staticClass:"font-bold d-inline"},[t._v("Materials")])])}],o=(a("7f7f"),a("20d6"),{computed:{loading:function(){return this.$store.getters.pgLoading}},mounted:function(){this.getBl(),this.getCategories()},data:function(){return{contents:[],categories:[],trucktype:"",addData:!1,table_options:{current_page:1},delAct:"",name:"",size:"",description:"",price:"",images:[],category_id:"",previewPop:!1,viewPreview:{}}},watch:{"table_options.current_page":function(){this.getContents(!0)}},methods:{viewAllPrices:function(t){this.previewPop=!0,this.viewPreview=t},getCategories:function(){var t=this,e={path:"/admin/materials/category"};this.$store.dispatch("getContents",e).then((function(e){t.categories=e.data.data,t.$store.commit("pgLoading",!1)})).catch((function(e){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.response?t.$vs.notify({title:"Get Data",text:e.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Get Data",text:"Unable to get Data",color:"dark",icon:"error",position:"bottom-center"}),t.$store.commit("pgLoading",!1)}))},deleteItem:function(t){this.delAct=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm Delete",text:"Are you sure you want to delete this content",accept:this.deleteFunc})},deleteFunc:function(){var t=this;this.$vs.loading({container:"#div-with-loading",scale:.6});var e=this.delAct;this.$store.dispatch("delContent",e).then((function(a){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.contents.records.splice(t.contents.records.findIndex((function(t){return t.id===e})),1),t.$vs.notify({icon:"error",color:"dark",position:"bottom-center",title:"Content deleted",text:"Content was successfully deleted"})})).catch((function(e){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.response?t.$vs.notify({title:"Delete content",text:e.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Delete content",text:"Unable to delete this content",color:"dark",icon:"error",position:"bottom-center"})}))},getBl:function(){this.$store.commit("pgLoading",!0),this.getContents(!1)},getContents:function(t){var e=this;t&&this.$vs.loading({container:"#div-with-loading",scale:.6});var a={path:"admin/materials",pageNo:this.table_options.current_page};this.$store.dispatch("getContents",a).then((function(a){e.contents=a.data.data,t&&e.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.$store.commit("pgLoading",!1)})).catch((function(t){e.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.response?e.$vs.notify({title:"Get Data",text:t.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):e.$vs.notify({title:"Get Data",text:"Unable to get Data",color:"dark",icon:"error",position:"bottom-center"}),e.$store.commit("pgLoading",!1)}))},addImages:function(t){for(var e=0;e<t.target.files.length;++e)this.images.push(t.target.files[e])},submitForm:function(){var t=this;this.$vs.loading();var e=new FormData;e.append("name",this.name),e.append("description",this.description),e.append("category_id",this.category_id);for(var a=0;a<this.images.length;a++)e.append("images[]",this.images[a]);var i={path:"admin/materials",data:e};this.$store.dispatch("create",i).then((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Create Material",text:"Successfully created new material",color:"success",icon:"verified_user",position:"bottom-center"}),setTimeout((function(){location.reload()}),1e3)})).catch((function(e){t.$vs.loading.close(),e.response?t.$vs.notify({title:"Create Material",text:e.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Create Material",text:"Unable to Create Material",color:"dark",icon:"error",position:"bottom-center"})}))}}}),n=o,c=a("2877"),r=Object(c["a"])(n,i,s,!1,null,null,null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d0d70c7.8e985ffa.js.map