(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22bce4"],{f114:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?t._e():a("div",[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-md-3 col-8"},[a("div",{staticClass:"text-right"},[a("vs-button",{staticClass:"ml-5",attrs:{color:"dark",type:"filled"},on:{click:function(e){t.addData=!0}}},[t._v("Add New")])],1)])]),a("div",{staticClass:"mt-5"},[a("vs-card",[a("div",{staticClass:"p-2"},[a("div",{staticClass:"mb-4"},[a("p",{staticClass:"font-bold lead"},[t._v("All ("+t._s(t.contents.total)+")")])]),a("vs-table",{attrs:{id:"div-with-loading","max-items":"10",data:t.contents.data,search:""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,n){return a("vs-tr",{key:n},[a("vs-td",{attrs:{data:s[n].id}},[t._v("\n                "+t._s(t.moment.utc(new Date(s[n].created_at)).format("dddd, MMM Do 'YY"))+"\n              ")]),a("vs-td",{attrs:{data:s[n].name}},[a("router-link",{staticClass:"font-bold",attrs:{to:"/truck/"+s[n].id}},[t._v("\n                  "+t._s(s[n].name))])],1),a("vs-td",{attrs:{data:s[n].type}},[a("span",{staticClass:"text-small",domProps:{innerHTML:t._s(s[n].type)}})]),a("vs-td",{attrs:{data:s[n].state}},[a("span",{staticClass:"text-small"},[t._v(t._s(t._f("capitalize")(s[n].state)))])]),a("vs-td",{attrs:{data:s[n].plate_number}},[t._v("\n                "+t._s(s[n].plate_number)+"\n              ")]),a("vs-td",{attrs:{data:s[n].device_id}},[t._v("\n                "+t._s(s[n].device_id)+"\n              ")]),a("vs-td",[a("vs-button",{staticClass:"mr-2 mb-2",attrs:{to:"/truck/"+s[n].id,size:"small"}},[t._v("View")]),a("vs-button",{attrs:{size:"small",color:"dark"},on:{click:function(e){return t.updateTrackID(s[n])}}},[t._v("Update Device ID\n                ")])],1)],1)}))}}],null,!1,1637164159)},[a("template",{slot:"thead"},[a("vs-th",[t._v(" Date Created ")]),a("vs-th",[t._v(" Title ")]),a("vs-th",[t._v(" Truck type ")]),a("vs-th",[t._v(" Truck State ")]),a("vs-th",[t._v(" Plate number ")]),a("vs-th",[t._v(" Device ID ")]),a("vs-th",[t._v(" Action ")])],1)],2),t.contents?a("vs-pagination",{staticClass:"mt-4",attrs:{total:Math.ceil(t.contents.total/10)},model:{value:t.table_options.current_page,callback:function(e){t.$set(t.table_options,"current_page",e)},expression:"table_options.current_page"}}):t._e()],1)])],1),a("vs-popup",{staticClass:"addPopup",attrs:{title:"Add Truck",active:t.addData},on:{"update:active":function(e){t.addData=e}}},[a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[a("div",{staticClass:"py-3"},[a("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Enter Truck name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("div",{staticClass:"py-3"},[a("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Enter truck type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("div",{staticClass:"py-3"},[a("vs-select",{staticClass:"w-full",attrs:{label:"Select truck state"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("vs-select-item",{attrs:{value:"good",text:"Good"}}),a("vs-select-item",{attrs:{value:"bad",text:"Bad"}}),a("vs-select-item",{attrs:{value:"fair",text:"Fair"}})],1)],1),a("div",{staticClass:"py-3"},[a("vs-select",{staticClass:"w-full",attrs:{label:"Select Unit"},model:{value:t.si_unit,callback:function(e){t.si_unit=e},expression:"si_unit"}},[a("vs-select-item",{attrs:{value:"tonne",text:"Tonne"}}),a("vs-select-item",{attrs:{value:"litre",text:"Litre"}})],1)],1),a("div",{staticClass:"py-3"},[a("vs-input",{staticClass:"w-full",attrs:{type:"number","label-placeholder":"Enter Capacity"},model:{value:t.capacity,callback:function(e){t.capacity=e},expression:"capacity"}})],1),a("div",{staticClass:"py-3"},[a("vs-select",{staticClass:"w-full",attrs:{label:"Select Company"},model:{value:t.manager_id,callback:function(e){t.manager_id=e},expression:"manager_id"}},t._l(t.managers,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.firstname+" "+t.lastname+" "}})})),1)],1),a("div",{staticClass:"py-3"},[a("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Enter Plate number"},model:{value:t.plate_number,callback:function(e){t.plate_number=e},expression:"plate_number"}})],1),a("div",{staticClass:"mt-10"},[a("vs-button",{staticClass:"w-full my-3",attrs:{color:"dark",type:"filled"},on:{click:t.submitForm}},[t._v("Add truck")]),a("vs-button",{staticClass:"w-full mb-2",attrs:{color:"dark",type:"flat"},on:{click:function(e){t.addData=!1}}},[t._v("Cancel")])],1)])])]),a("vs-popup",{staticClass:"addPopup",attrs:{title:"Update Tracker ID for "+t.activeTruck.name,active:t.updateTrack},on:{"update:active":function(e){t.updateTrack=e}}},[a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.submitFormTrackID(e)}}},[a("div",{staticClass:"py-3"},[a("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Enter tracker ID"},model:{value:t.device_id,callback:function(e){t.device_id=e},expression:"device_id"}})],1),a("div",{staticClass:"mt-10"},[a("vs-button",{staticClass:"w-full my-3",attrs:{color:"dark",type:"filled"},on:{click:t.submitFormTrackID}},[t._v("Update track ID")]),a("vs-button",{staticClass:"w-full mb-2",attrs:{color:"dark",type:"flat"},on:{click:function(e){t.updateTrack=!1}}},[t._v("Cancel")])],1)])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-9 col-4"},[a("h3",{staticClass:"font-bold d-inline"},[t._v("Trucks")])])}],i=(a("7f7f"),a("20d6"),{computed:{loading:function(){return this.$store.getters.pgLoading}},mounted:function(){this.getBl(),this.getManagers()},data:function(){return{contents:[],trucktype:"",addData:!1,table_options:{current_page:1},managers:[],delAct:"",name:"",type:"",state:"",manager_id:"",plate_number:"",capacity:"",si_unit:"",activeTruck:{},updateTrack:!1,device_id:""}},watch:{"table_options.current_page":function(){this.getContents(!0)}},methods:{deleteItem:function(t){this.delAct=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm Delete",text:"Are you sure you want to delete this content",accept:this.deleteFunc})},updateTrackID:function(t){this.updateTrack=!0,this.activeTruck=t},deleteFunc:function(){var t=this;this.$vs.loading({container:"#div-with-loading",scale:.6});var e=this.delAct;this.$store.dispatch("delContent",e).then((function(a){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.contents.data.splice(t.contents.data.findIndex((function(t){return t.id===e})),1),t.$vs.notify({icon:"error",color:"dark",position:"bottom-center",title:"Content deleted",text:"Content was successfully deleted"})})).catch((function(e){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.response?t.$vs.notify({title:"Delete content",text:e.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Delete content",text:"Unable to delete this content",color:"dark",icon:"error",position:"bottom-center"})}))},getBl:function(){this.$store.commit("pgLoading",!0),this.getContents(!1)},getContents:function(t){var e=this;t&&this.$vs.loading({container:"#div-with-loading",scale:.6});var a={path:"admin/trucks",pageNo:this.table_options.current_page};this.$store.dispatch("getContents",a).then((function(a){e.contents=a.data.data,t&&e.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.$store.commit("pgLoading",!1)})).catch((function(t){e.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.response?e.$vs.notify({title:"Get Contents",text:t.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):e.$vs.notify({title:"Get Contents",text:"Unable to get contents",color:"dark",icon:"error",position:"bottom-center"}),e.$store.commit("pgLoading",!1)}))},getManagers:function(){var t=this,e={path:"admin/managers"};this.$store.dispatch("getContents",e).then((function(e){t.managers=e.data.data.data,t.$store.commit("pgLoading",!1)})).catch((function(e){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.response?t.$vs.notify({title:"Get Data",text:e.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Get Data",text:"Unable to get Data",color:"dark",icon:"error",position:"bottom-center"}),t.$store.commit("pgLoading",!1)}))},submitFormTrackID:function(){var t=this;this.$vs.loading();var e={id:this.activeTruck.id,device_id:this.device_id},a={path:"admin/trucks/device-id",data:e};this.$store.dispatch("update",a).then((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Tracker ID Update",text:"Successfully updated tracker ID",color:"success",icon:"verified_user",position:"bottom-center"}),setTimeout((function(){location.reload()}),1e3)})).catch((function(e){t.$vs.loading.close(),e.response?t.$vs.notify({title:"Tracker ID Update",text:e.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Tracker ID Update",text:"Unable to Update tracker ID",color:"dark",icon:"error",position:"bottom-center"})}))},submitForm:function(){var t=this;this.$vs.loading();var e=new FormData;e.append("name",this.name),e.append("type",this.type),e.append("state",this.state),e.append("manager_id",this.manager_id),e.append("plate_number",this.plate_number),e.append("capacity",this.capacity),e.append("si_unit",this.si_unit);var a={path:"admin/trucks",data:e};this.$store.dispatch("create",a).then((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Create Truck profile",text:"Successfully created new profile",color:"success",icon:"verified_user",position:"bottom-center"}),setTimeout((function(){location.reload()}),1e3)})).catch((function(e){t.$vs.loading.close(),e.response?t.$vs.notify({title:"Create Truck",text:e.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Create Truck",text:"Unable to Create Truck",color:"dark",icon:"error",position:"bottom-center"})}))}}}),o=i,c=a("2877"),l=Object(c["a"])(o,s,n,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d22bce4.d346134b.js.map