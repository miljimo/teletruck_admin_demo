(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af8c6"],{"0f93":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.loading?t._e():e("div",[e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-md-3 col-8"},[e("div",{staticClass:"text-right"},[e("vs-button",{staticClass:"ml-5",attrs:{color:"dark",type:"filled"},on:{click:function(a){t.addData=!0}}},[t._v("Add New")])],1)])]),e("div",{staticClass:"mt-5"},[e("vs-card",[e("div",{staticClass:"p-2"},[e("div",{staticClass:"mb-4"},[e("p",{staticClass:"font-bold lead"},[t._v("All ("+t._s(t.contents.total)+")")])]),e("vs-table",{attrs:{id:"div-with-loading","max-items":"10",data:t.contents.data,search:""},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,(function(a,i){return e("vs-tr",{key:i},[e("vs-td",{attrs:{data:s[i].id}},[t._v("\n                "+t._s(t.moment.utc(new Date(s[i].created_at)).format("dddd, MMM Do 'YY"))+"\n              ")]),e("vs-td",{attrs:{data:s[i].firstname}},[e("router-link",{staticClass:"font-bold",staticStyle:{"align-items":"center",display:"flex"},attrs:{to:"/view-profile/"+s[i].id}},[s[i].profile?e("span",[t._v("\n                    "+t._s(s[i].profile.company_name))]):t._e()])],1),e("vs-td",{attrs:{data:s[i].firstname}},[e("router-link",{staticClass:"font-bold",staticStyle:{"align-items":"center",display:"flex"},attrs:{to:"/view-profile/"+s[i].id}},[e("vs-avatar",{staticClass:"mr-2",attrs:{src:s[i].profile_photo_url}}),t._v("\n                  "+t._s(s[i].firstname)+"\n                  "+t._s(s[i].lastname))],1)],1),e("vs-td",{attrs:{data:s[i].email}},[e("span",{staticClass:"text-small",domProps:{innerHTML:t._s(s[i].email)}})]),e("vs-td",{attrs:{data:s[i].phone}},[t._v("\n                "+t._s(s[i].phone)+"\n              ")]),e("vs-td",[e("vs-button",{staticClass:"mr-2 mb-2",attrs:{to:"/view-profile/"+s[i].id,size:"small"}},[t._v("View")]),e("vs-button",{staticClass:"mr-2 mb-2",attrs:{size:"small",color:"dark"},on:{click:function(a){return t.editCompany(s[i])}}},[t._v("Edit")]),e("vs-button",{staticClass:"mr-2 mb-2",attrs:{size:"small",color:"dark",type:"border"},on:{click:function(a){return t.toggleStatus(s[i].id)}}},["active"==s[i].status_text?e("span",[t._v("Deactivate")]):e("span",[t._v("Activate")])])],1)],1)}))}}],null,!1,790940889)},[e("template",{slot:"thead"},[e("vs-th",[t._v(" Created ")]),e("vs-th",[t._v(" Company ")]),e("vs-th",[t._v(" Manager ")]),e("vs-th",[t._v(" Email address ")]),e("vs-th",[t._v(" Phone")]),e("vs-th",[t._v(" Action ")])],1)],2),t.contents?e("vs-pagination",{staticClass:"mt-4",attrs:{total:Math.ceil(t.contents.total/10)},model:{value:t.table_options.current_page,callback:function(a){t.$set(t.table_options,"current_page",a)},expression:"table_options.current_page"}}):t._e()],1)])],1),e("vs-popup",{staticClass:"addPopup",attrs:{title:"Add Company profile",active:t.addData},on:{"update:active":function(a){t.addData=a}}},[e("div",[e("form",{on:{submit:function(a){return a.preventDefault(),t.submitForm(a)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Company name"},model:{value:t.company_name,callback:function(a){t.company_name=a},expression:"company_name"}})],1)])]),e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Company address"},model:{value:t.company_address,callback:function(a){t.company_address=a},expression:"company_address"}})],1),e("div",[e("div",{staticClass:"py-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Manager First name"},model:{value:t.firstname,callback:function(a){t.firstname=a},expression:"firstname"}})],1),e("div",{staticClass:"col-md-6"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Manager Last name"},model:{value:t.lastname,callback:function(a){t.lastname=a},expression:"lastname"}})],1)])])]),e("div",[e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Manager Email"},model:{value:t.email,callback:function(a){t.email=a},expression:"email"}})],1)]),e("div",[e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"max-length":"11","label-placeholder":"Manager Phone number"},model:{value:t.phone,callback:function(a){t.phone=a},expression:"phone"}})],1)]),e("div",[e("div",{staticClass:"py-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Password"},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}})],1),e("div",{staticClass:"col-md-6"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Confirm Password"},model:{value:t.password_confirmation,callback:function(a){t.password_confirmation=a},expression:"password_confirmation"}})],1)])])]),e("div",{staticClass:"mt-10"},[e("vs-button",{staticClass:"w-full my-3",attrs:{color:"dark",type:"filled"},on:{click:t.submitForm}},[t._v("Add Company Profile")]),e("vs-button",{staticClass:"w-full mb-2",attrs:{color:"dark",type:"flat"},on:{click:function(a){t.addData=!1}}},[t._v("Cancel")])],1)])])]),e("vs-popup",{staticClass:"addPopup",attrs:{title:"Edit Company profile",active:t.editView},on:{"update:active":function(a){t.editView=a}}},[e("div",[e("form",{on:{submit:function(a){return a.preventDefault(),t.editProfile(a)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Company name"},model:{value:t.edit.company_name,callback:function(a){t.$set(t.edit,"company_name",a)},expression:"edit.company_name"}})],1)])]),e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Company address"},model:{value:t.edit.company_address,callback:function(a){t.$set(t.edit,"company_address",a)},expression:"edit.company_address"}})],1),e("div",[e("div",{staticClass:"py-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Manager First name"},model:{value:t.edit.firstname,callback:function(a){t.$set(t.edit,"firstname",a)},expression:"edit.firstname"}})],1),e("div",{staticClass:"col-md-6"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Manager Last name"},model:{value:t.edit.lastname,callback:function(a){t.$set(t.edit,"lastname",a)},expression:"edit.lastname"}})],1)])])]),e("div",[e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Manager Email"},model:{value:t.edit.email,callback:function(a){t.$set(t.edit,"email",a)},expression:"edit.email"}})],1)]),e("div",[e("div",{staticClass:"py-3"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Manager Phone number"},model:{value:t.edit.phone,callback:function(a){t.$set(t.edit,"phone",a)},expression:"edit.phone"}})],1)]),e("div",{staticClass:"mt-10"},[e("vs-button",{staticClass:"w-full my-3",attrs:{color:"dark",type:"filled"},on:{click:t.editProfile}},[t._v("Edit Company Profile")]),e("vs-button",{staticClass:"w-full mb-2",attrs:{color:"dark",type:"flat"},on:{click:function(a){t.editView=!1}}},[t._v("Cancel")])],1)])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-9 col-4"},[e("h3",{staticClass:"font-bold d-inline"},[t._v("Companies")])])}],o=(e("20d6"),{computed:{loading:function(){return this.$store.getters.pgLoading}},mounted:function(){this.getBl()},data:function(){return{contents:[],addData:!1,table_options:{current_page:1},editView:!1,delAct:"",firstname:"",lastname:"",email:"",phone:"",password:"",password_confirmation:"",company_name:"",company_address:"",editData:{},edit:{firstname:"",lastname:"",email:"",phone:"",company_name:"",company_address:"",id:""}}},watch:{"table_options.current_page":function(){this.getContents(!0)}},methods:{editCompany:function(t){this.editView=!0,this.edit.id=t.id,this.edit.firstname=t.firstname,this.edit.lastname=t.lastname,this.edit.email=t.email,this.edit.phone=t.phone,this.edit.company_name=t.profile.company_name,this.edit.company_address=t.profile.office_address},toggleStatus:function(t){var a=this;this.$vs.loading({container:"#div-with-loading",scale:.6});var e={id:t},s={path:"/admin/managers/".concat(t,"/toggle-status"),data:e};this.$store.dispatch("create",s).then((function(t){a.$vs.loading.close(),a.$vs.notify({title:"Company status",text:"Status changed successfully",color:"success",icon:"verified_user",position:"bottom-center"}),setTimeout((function(){location.reload()}),1e3)})).catch((function(t){a.$vs.loading.close(),t.response?a.$vs.notify({title:"Company status",text:t.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):a.$vs.notify({title:"Company status",text:"Unable to Change status",color:"dark",icon:"error",position:"bottom-center"})}))},deleteItem:function(t){this.delAct=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm Delete",text:"Are you sure you want to delete this content",accept:this.deleteFunc})},deleteFunc:function(){var t=this;this.$vs.loading({container:"#div-with-loading",scale:.6});var a=this.delAct;this.$store.dispatch("delContent",a).then((function(e){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.contents.records.splice(t.contents.records.findIndex((function(t){return t.id===a})),1),t.$vs.notify({icon:"error",color:"dark",position:"bottom-center",title:"Content deleted",text:"Content was successfully deleted"})})).catch((function(a){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),a.response?t.$vs.notify({title:"Delete content",text:a.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Delete content",text:"Unable to delete this content",color:"dark",icon:"error",position:"bottom-center"})}))},getBl:function(){this.$store.commit("pgLoading",!0),this.getContents(!1)},getContents:function(t){var a=this;t&&this.$vs.loading({container:"#div-with-loading",scale:.6});var e={path:"admin/managers",pageNo:this.table_options.current_page};this.$store.dispatch("getContents",e).then((function(e){a.contents=e.data.data,t&&a.$vs.loading.close("#div-with-loading > .con-vs-loading"),a.$store.commit("pgLoading",!1)})).catch((function(t){a.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.response?a.$vs.notify({title:"Get Data",text:t.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):a.$vs.notify({title:"Get Data",text:"Unable to get Data",color:"dark",icon:"error",position:"bottom-center"}),a.$store.commit("pgLoading",!1)}))},editProfile:function(){var t=this;this.$vs.loading();var a=new FormData;a.append("firstname",this.edit.firstname),a.append("lastname",this.edit.lastname),a.append("email",this.edit.email),a.append("phone",this.edit.phone),a.append("company_name",this.edit.company_name),a.append("company_address",this.edit.company_address);var e={path:"/admin/managers/".concat(this.edit.id,"/update"),data:a};this.$store.dispatch("create",e).then((function(a){t.$vs.loading.close(),t.$vs.notify({title:"Edit Company Profile",text:"Successfully editted new profile",color:"success",icon:"verified_user",position:"bottom-center"}),setTimeout((function(){location.reload()}),1e3)})).catch((function(a){t.$vs.loading.close(),a.response?t.$vs.notify({title:"Edit Company Profile",text:a.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Create Company Profile",text:"Unable to edit Company Profile",color:"dark",icon:"error",position:"bottom-center"})}))},submitForm:function(){var t=this;if(this.password!==this.password_confirmation&&this.password.length<8)this.$vs.notify({icon:"error",color:"dark",position:"bottom-center",title:"Password mismatch or Charater length is less than 8",text:"Check password again"});else{this.$vs.loading();var a=new FormData;a.append("firstname",this.firstname),a.append("lastname",this.lastname),a.append("email",this.email),a.append("phone",this.phone),a.append("password",this.password),a.append("password_confirmation",this.password_confirmation),a.append("company_name",this.company_name),a.append("company_address",this.company_address);var e={path:"admin/managers",data:a};this.$store.dispatch("create",e).then((function(a){t.$vs.loading.close(),t.$vs.notify({title:"Create Company Profile",text:"Successfully created new profile",color:"success",icon:"verified_user",position:"bottom-center"}),setTimeout((function(){location.reload()}),1e3)})).catch((function(a){t.$vs.loading.close(),a.response?t.$vs.notify({title:"Create Company Profile",text:a.response.data.message,color:"warning",icon:"error",position:"bottom-center"}):t.$vs.notify({title:"Create Company Profile",text:"Unable to Create Company Profile",color:"dark",icon:"error",position:"bottom-center"})}))}}}}),n=o,l=e("2877"),c=Object(l["a"])(n,s,i,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0af8c6.b273fe7d.js.map