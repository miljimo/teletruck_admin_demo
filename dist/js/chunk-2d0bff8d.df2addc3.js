(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bff8d"],{4094:function(t,a,s){"use strict";s.r(a);var n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"page-user-view"}},[s("div",{attrs:{id:"user-data"}},[s("vx-card",{staticClass:"mb-4 vs-con-loading__container",attrs:{id:"div-with-loading"}},[s("div",{staticClass:"mb-8"},[s("a",{attrs:{href:"javascript:void()"},on:{click:function(a){return t.$router.go(-1)}}},[t._v("← Back")])]),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col",attrs:{id:"avatar-col"}},[s("div",{staticClass:"img-container mb-4"},[t.branchInfo.img?s("img",{staticClass:"logowidth",attrs:{src:"https://d1fp61h5e226jt.cloudfront.net/"+t.branchInfo.img}}):t._e()])]),s("div",{staticClass:"vx-col flex-1",attrs:{id:"account-info-col-1"}},[s("table",[s("tr",[s("td",{staticClass:"font-semibold"},[t._v("Church Name")]),s("td",[t._v(t._s(t.branchInfo.name))])]),s("tr",[s("td",{staticClass:"font-semibold"},[t._v("Location")]),s("td",[t._v(t._s(t.branchInfo.region)+" "+t._s(t.branchInfo.state)+","+t._s(t.branchInfo.country))])]),s("tr",[s("td",{staticClass:"font-semibold"},[t._v("Address")]),s("td",[t._v(t._s(t.branchInfo.address))])]),s("tr",[s("td",{staticClass:"font-semibold"},[t._v("Email")]),s("td",[s("a",{attrs:{href:"mailto:"+t.branchInfo.email,target:"_blank"}},[t._v(t._s(t.branchInfo.email))])])])]),s("div",{staticClass:"vx-col w-full flex mt-5",attrs:{id:"account-manage-buttons"}},[s("vs-button",{staticClass:"mr-4",attrs:{"icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return t.$router.push({path:"/edit-branch/"+t.branchInfo._id,query:{_id:t.branchInfo._id}})}}},[t._v("Edit")]),s("vs-button",{attrs:{type:"border",color:"danger","icon-pack":"feather",icon:"icon-trash"},on:{click:t.confirmDeleteRecord}},[t._v("Delete")])],1)]),s("div",{staticClass:"vx-col flex-1",attrs:{id:"account-info-col-2"}},[s("table",[s("tr",[s("td",{staticClass:"font-semibold"},[t._v("Pastor")]),s("td",[t._v(t._s(t.branchInfo.pastor))])]),s("tr",[s("td",{staticClass:"font-semibold"},[t._v("Mobile Number")]),s("td",[t._v(t._s(t.branchInfo.countryCode)+t._s(t.branchInfo.phoneNumber))])]),s("tr",[s("td",{staticClass:"font-semibold"},[t._v("Zone")]),s("td",[t._v(t._s(t.branchInfo.zone))])])])])])]),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2"},[s("vx-card",{staticClass:"mb-base vs-con-loading__container",attrs:{title:"Church Wallet",id:"div-with-wallet"}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-3"},[s("div",{staticClass:"walletinfocard"},[s("h3",{staticClass:"font-bold"},[t._v(t._s(t._f("currency")(t.totalAmt,"₦",0)))]),s("p",{staticClass:"text-danger"},[t._v("Total")])])]),t._l(t.walletInfo,(function(a,n){return s("div",{key:n,staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-3"},[s("div",{staticClass:"walletinfocard"},[s("h3",{staticClass:"font-bold"},[t._v(t._s(t._f("currency")(a.amount,"₦",0)))]),s("p",{staticClass:"text-danger"},[t._v(t._s(a.name))])])])}))],2)])],1),s("div",{staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2"},[s("vx-card",{staticClass:"mb-base vs-con-loading__container",attrs:{title:"Wallet History",id:"div-with-wallet"}},[s("div",{staticStyle:{"min-height":"240px"}},[s("e-charts",{ref:"pie",staticClass:"piechartheight",staticStyle:{"min-height":"240px"},attrs:{autoresize:"",options:t.walletChart,"auto-resize":""}})],1)])],1)]),s("vx-card",{staticClass:"mb-base vs-con-loading__container",attrs:{title:"Wallet Transactions"}},[s("vs-table",{attrs:{id:"div-with-transactions",search:"","max-items":"5",pagination:"",data:t.transactionInfo},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.data;return t._l(n,(function(a,n){return s("vs-tr",{key:n},[s("vs-td",{attrs:{data:a.createdAt}},[t._v(t._s(t._f("formatDate")(a.createdAt)))]),s("vs-td",{attrs:{data:a.memberId.fullName}},[t._v(t._s(a.memberId.fullName))]),s("vs-td",{attrs:{data:a.description}},[t._v(t._s(a.description))]),s("vs-td",{attrs:{data:a.amount}},[t._v(t._s(a.currency)+" "+t._s(t._f("currency")(a.amount,"₦",0)))]),s("vs-td",{attrs:{data:a.status}},[s("vs-chip",[s("span",{staticClass:"uppercase"},[t._v(t._s(a.status))])])],1),s("vs-td",{attrs:{data:a.type}},[s("span",{staticClass:"capitalize"},[t._v(t._s(a.type))])]),s("vs-td",[s("vs-button",{staticClass:"mr-2 mb-2",attrs:{color:"primary",type:"filled",size:"small"},on:{click:function(s){return t.viewTransaction(a._id)}}},[t._v("View")])],1)],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",[t._v("Date created")]),s("vs-th",[t._v("Member")]),s("vs-th",[t._v("Description")]),s("vs-th",[t._v("Amount")]),s("vs-th",[t._v("Status")]),s("vs-th",[t._v("Type")]),s("vs-th",[t._v("Action")])],1)],2)],1),s("vs-popup",{staticClass:"holamundo",attrs:{title:"Transaction Details",active:t.transactionPopUp},on:{"update:active":function(a){t.transactionPopUp=a}}},[s("p",{staticClass:"mb-4 pl-2"},[s("span",{staticClass:"font-bold"},[t._v("Date -")]),t._v("\n        "+t._s(t._f("formatDate")(t.transactionSingle.date))+"\n      ")]),s("div",{staticClass:"vx-row px-2"},[s("div",{staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2"},[s("div",{staticClass:"walletinfocard"},[s("h3",{staticClass:"font-bold"},[t._v(t._s(t._f("currency")(t.transactionSingle.totalamt,"₦",0)))]),s("p",{staticClass:"text-danger"},[t._v("Total")])])]),s("div",{staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2"},[s("div",{staticClass:"walletinfocard"},[s("vs-list-item",{attrs:{title:t.transactionSingle.membername,subtitle:t.transactionSingle.memberemail}},[s("template",{slot:"avatar"},[s("vs-avatar",{attrs:{src:"https://d1fp61h5e226jt.cloudfront.net/"+t.transactionSingle.avatar}})],1)],2)],1)])]),s("vs-list",[s("vs-list-item",{attrs:{title:"Description",subtitle:t.transactionSingle.description}}),s("vs-list-item",{attrs:{title:"Mode of Payment",subtitle:t.transactionSingle.mode}}),s("vs-list-item",{attrs:{title:"Payment GateWay",subtitle:t.transactionSingle.gateway}}),s("vs-list-item",{attrs:{title:"Recursive",subtitle:t.transactionSingle.recursive}}),s("vs-list-item",{attrs:{title:"Transaction Reference",subtitle:t.transactionSingle.transref}}),s("vs-list-item",{attrs:{title:"Type",subtitle:t.transactionSingle.type}}),s("div",{staticClass:"mb-5 mt-3"},[s("vs-list-header",{attrs:{title:"Wallet Information"}}),s("vs-list-item",{attrs:{title:"Amount",subtitle:t._f("currency")(t.transactionSingle.wallet.amount,"₦",0)}}),s("vs-list-item",{attrs:{title:"Name",subtitle:t.transactionSingle.wallet.name}}),s("vs-list-item",{attrs:{title:"Verified",subtitle:t.transactionSingle.wallet.verified}})],1)],1)],1)],1)])},e=[],i=(s("7f7f"),s("9ca8")),o=(s("007d"),s("d28f"),s("94b1"),s("c037"),{data:function(){return{branchInfo:{},totalAmt:0,transactionInfo:[],transactionPopUp:!1,transactionSingle:{date:"",totalamt:"",membername:"",avatar:"",memberemail:"",description:"",mode:"",gateway:"",recursive:"",transref:"",type:"",wallet:{amount:"",name:"",verified:""}},walletInfo:{},walletChart:{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"Customers",type:"pie",radius:"55%",center:["50%","60%"],color:["#0f163a","#768cff","#473DC1","#0DAC99","#27CB98","#D5C723","#DA52E5","#F59781"],data:[],itemStyle:{emphasis:{shadowBlur:7,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.2)"}}}]}}},components:{ECharts:i["a"]},methods:{openLoadingInDiv:function(){this.$vs.loading({container:"#div-with-loading",scale:.6})},openLoadingInTransactions:function(){this.$vs.loading({container:"#div-with-transactions",scale:.6})},openLoadingInWAllet:function(){this.$vs.loading({container:"#div-with-wallet",scale:.6})},confirmDeleteRecord:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm Delete",text:'You are about to delete "'.concat(this.branchInfo.name,'"'),accept:this.deleteAccount,acceptText:"Delete"})},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Account Deleted",text:"The selected church account was successfully deleted"})},deleteAccount:function(){var t=this;this.openLoadingInDiv();var a=this.branchInfo._id;this.$store.dispatch("deleteChurch",a).then((function(a){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.showDeleteSuccess(),t.$router.back()})).catch((function(a){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),console.log(a.response),a.response&&400==a.response.status?(console.log(a.response.data),t.$vs.notify({title:"Church Account",text:a.response.data,color:"warning"})):t.$vs.notify({title:"Church Account",text:"Unable to delete church account, try again!",color:"warning"})}))},getBranchTransaction:function(){var t=this,a=this.$route.query.branchId;this.$store.dispatch("getBranchTransaction",a).then((function(a){t.$vs.loading.close("#div-with-transactions > .con-vs-loading"),t.transactionInfo=a.data.transaction,console.log(t.transactionInfo)})).catch((function(a){t.$vs.loading.close("#div-with-transactions > .con-vs-loading"),console.log(a.response),a.response?400==a.response.status?(console.log(a.response.data),t.$vs.notify({title:"Church Account",text:a.response.data,color:"warning"})):t.$vs.notify({title:"Church Wallet",text:"Unable to load church transactions, try again!",color:"warning"}):t.$vs.notify({title:"Church Account",text:"Unable to load church transactions, try again!",color:"warning"})}))},getWalletInfo:function(){var t=this,a=this.$route.query.branchId;this.$store.dispatch("getBranchWallet",a).then((function(a){t.$vs.loading.close("#div-with-wallet > .con-vs-loading"),t.walletInfo=a.data;for(var s=0;s<t.walletInfo.length;s++){t.walletChart.legend.data.push(t.walletInfo[s].name);var n={value:t.walletInfo[s].amount,name:t.walletInfo[s].name};t.totalAmt+=t.walletInfo[s].amount,t.walletChart.series[0].data.push(n)}})).catch((function(a){t.$vs.loading.close("#div-with-wallet > .con-vs-loading"),console.log(a.response),a.response?400==a.response.status?(console.log(a.response.data),t.$vs.notify({title:"Branch Account",text:a.response.data,color:"warning"})):t.$vs.notify({title:"Branch Wallet",text:"Unable to load branch wallet, try again!",color:"warning"}):t.$vs.notify({title:"Branch Account",text:"Unable to load church wallet, try again!",color:"warning"})}))},getBranchInfo:function(){var t=this,a=this.$route.query.branchId;this.$store.dispatch("getBranchDetails",a).then((function(a){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.branchInfo=a.data})).catch((function(a){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),console.log(a.response),a.response?400==a.response.status?(console.log(a.response.data),t.$vs.notify({title:"Branch Account",text:a.response.data,color:"warning"})):t.$vs.notify({title:"Branch Account",text:"Unable to load brancj details, try again!",color:"warning"}):t.$vs.notify({title:"Branch Account",text:"Unable to load branch details, try again!",color:"warning"})}))}},mounted:function(){this.openLoadingInDiv(),this.getBranchInfo(),this.openLoadingInTransactions(),this.getWalletInfo(),this.getBranchTransaction()}}),l=o,c=s("2877"),r=Object(c["a"])(l,n,e,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d0bff8d.df2addc3.js.map