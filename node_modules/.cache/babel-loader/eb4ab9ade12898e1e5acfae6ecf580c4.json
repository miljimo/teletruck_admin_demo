{"remainingRequest":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/node_modules/babel-loader/lib/index.js!/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/src/views/Videos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/src/views/Videos.vue","mtime":1614541567143},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/node_modules/cache-loader/dist/cjs.js","mtime":1596790124748},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/node_modules/babel-loader/lib/index.js","mtime":1596739166622},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/node_modules/cache-loader/dist/cjs.js","mtime":1596790124748},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Teletruck Admin/node_modules/vue-loader/lib/index.js","mtime":1596739192596}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  computed: {\n    loading: function loading() {\n      return this.$store.getters.pgLoading;\n    }\n  },\n  mounted: function mounted() {\n    this.getBl();\n  },\n  data: function data() {\n    return {\n      videoPopup: false,\n      videoContent: {},\n      videos: [],\n      viewPreviewID: \"\",\n      table_options: {\n        current_page: 1\n      },\n      delAct: \"\"\n    };\n  },\n  watch: {\n    \"table_options.current_page\": function table_optionsCurrent_page() {\n      this.getVideos(true);\n    }\n  },\n  methods: {\n    deleteItem: function deleteItem(id) {\n      this.delAct = id;\n      this.$vs.dialog({\n        type: \"confirm\",\n        color: \"danger\",\n        title: \"Confirm Delete\",\n        text: \"Are you sure you want to delete this content\",\n        accept: this.deleteFunc\n      });\n    },\n    viewVideo: function viewVideo(video) {\n      console.log(video);\n      this.videoPopup = true;\n      this.videoContent = video;\n      this.viewPreviewID = this.$youtube.getIdFromURL(video.embed_link);\n    },\n    deleteFunc: function deleteFunc() {\n      var _this = this;\n\n      this.$vs.loading({\n        container: \"#div-with-loading\",\n        scale: 0.6\n      });\n      var contID = this.delAct;\n      this.$store.dispatch(\"deleteVideo\", contID).then(function (resp) {\n        _this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n\n        _this.videos.records.splice(_this.videos.records.findIndex(function (i) {\n          return i.id === contID;\n        }), 1); //   console.log(this.videos.records);\n\n\n        _this.$vs.notify({\n          icon: \"error\",\n          color: \"dark\",\n          position: \"bottom-center\",\n          title: \"Content deleted\",\n          text: \"Content was successfully deleted\"\n        });\n      }).catch(function (err) {\n        _this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n\n        if (err.response) {\n          _this.$vs.notify({\n            title: \"Delete content\",\n            text: err.response.data.message,\n            color: \"warning\",\n            icon: \"error\",\n            position: \"bottom-center\"\n          });\n        } else {\n          _this.$vs.notify({\n            title: \"Delete content\",\n            text: \"Unable to delete this content\",\n            color: \"dark\",\n            icon: \"error\",\n            position: \"bottom-center\"\n          });\n        }\n      });\n    },\n    getBl: function getBl() {\n      this.$store.commit(\"pgLoading\", true);\n      this.getVideos(false);\n    },\n    getVideos: function getVideos(divLoad) {\n      var _this2 = this;\n\n      if (divLoad) {\n        this.$vs.loading({\n          container: \"#div-with-loading\",\n          scale: 0.6\n        });\n      }\n\n      var pageNo = this.table_options.current_page;\n      this.$store.dispatch(\"getVideos\", pageNo).then(function (resp) {\n        _this2.videos = resp.data; //   console.log(resp.data.data);\n\n        if (divLoad) {\n          _this2.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n        }\n\n        _this2.videos = resp.data.data;\n\n        _this2.$store.commit(\"pgLoading\", false);\n      }).catch(function (err) {\n        _this2.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n\n        if (err.response) {\n          _this2.$vs.notify({\n            title: \"Get videos\",\n            text: err.response.data.message,\n            color: \"warning\",\n            icon: \"error\",\n            position: \"bottom-center\"\n          });\n        } else {\n          _this2.$vs.notify({\n            title: \"Get videos\",\n            text: \"Unable to get videos\",\n            color: \"dark\",\n            icon: \"error\",\n            position: \"bottom-center\"\n          });\n        }\n\n        _this2.$store.commit(\"pgLoading\", false);\n      });\n    }\n  }\n};",{"version":3,"sources":["Videos.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div v-if=\"!loading\">\n    <h3 class=\"font-bold d-inline\">All Videos</h3>\n    <vs-button to=\"/add-video\" color=\"primary\" class=\"ml-5\" type=\"filled\"\n      >Add New</vs-button\n    >\n    <div class=\"mt-5\">\n      <vs-card>\n        <div class=\"p-2\">\n          <div class=\"mb-4\">\n            <p class=\"font-bold lead\" v-if=\"videos.pagination\">\n              All ({{ videos.pagination.total_record }})\n            </p>\n          </div>\n\n          <vs-table\n            id=\"div-with-loading\"\n            max-items=\"10\"\n            :data=\"videos.records\"\n            search\n          >\n            <template slot=\"thead\">\n              <vs-th> Title </vs-th>\n\n              <vs-th> Synopsis </vs-th>\n              <!-- <vs-th> Tags </vs-th> -->\n              <vs-th> Date </vs-th>\n              <vs-th> Action </vs-th>\n            </template>\n\n            <template slot-scope=\"{ data }\">\n              <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\n                <vs-td :data=\"data[indextr].title\">\n                  <p\n                    @click=\"viewVideo(data[indextr])\"\n                    class=\"font-bold text-primary cursor-pointer\"\n                  >\n                    {{ data[indextr].name }}\n                  </p>\n                </vs-td>\n\n                <vs-td :data=\"data[indextr].synopsis\">\n                  <span\n                    class=\"text-small\"\n                    v-html=\"data[indextr].synopsis\"\n                  ></span>\n                </vs-td>\n\n                <!-- <vs-td :data=\"data[indextr].synopsis\">\n                  {{ data[indextr].synopsis }}\n                </vs-td> -->\n\n                <vs-td :data=\"data[indextr].id\">\n                  <p class=\"text-small\">Published</p>\n                  {{\n                    moment\n                      .utc(new Date(data[indextr].date_created))\n                      .format(\"dddd, MMM Do 'YY\")\n                  }}\n                </vs-td>\n\n                <vs-td>\n                  <!-- <vs-button\n                    :to=\"`edit-blog/${data[indextr].id}`\"\n                    size=\"small\"\n                    class=\"mr-2 mb-2\"\n                    >Edit</vs-button\n                  > -->\n                  <vs-button\n                    @click=\"deleteItem(data[indextr].id)\"\n                    size=\"small\"\n                    color=\"dark\"\n                    >Delete</vs-button\n                  >\n                </vs-td>\n              </vs-tr>\n            </template>\n          </vs-table>\n\n          <vs-pagination\n            v-if=\"videos.pagination\"\n            class=\"mt-4\"\n            :total=\"Math.ceil(videos.pagination.total_record / 10)\"\n            v-model=\"table_options.current_page\"\n          ></vs-pagination>\n        </div>\n      </vs-card>\n\n      <vs-popup :title=\"videoContent.name\" :active.sync=\"videoPopup\">\n        <p class=\"text-small mb-2\">\n          {{ moment.utc(videoContent.date_created).format(\"dddd, MMM Do 'YY\") }}\n        </p>\n        <p>\n          <span v-html=\"videoContent.synopsis\"></span>\n        </p>\n        <div class=\"my-10\">\n          <youtube\n            style=\"width: 100%\"\n            player-width=\"100%\"\n            :video-id=\"viewPreviewID\"\n          ></youtube>\n        </div>\n      </vs-popup>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  computed: {\n    loading() {\n      return this.$store.getters.pgLoading;\n    },\n  },\n  mounted() {\n    this.getBl();\n  },\n  data() {\n    return {\n      videoPopup: false,\n      videoContent: {},\n      videos: [],\n      viewPreviewID: \"\",\n      table_options: {\n        current_page: 1,\n      },\n      delAct: \"\",\n    };\n  },\n  watch: {\n    \"table_options.current_page\": function () {\n      this.getVideos(true);\n    },\n  },\n  methods: {\n    deleteItem(id) {\n      this.delAct = id;\n      this.$vs.dialog({\n        type: \"confirm\",\n        color: \"danger\",\n        title: `Confirm Delete`,\n        text: `Are you sure you want to delete this content`,\n        accept: this.deleteFunc,\n      });\n    },\n    viewVideo(video) {\n      console.log(video);\n      this.videoPopup = true;\n      this.videoContent = video;\n      this.viewPreviewID = this.$youtube.getIdFromURL(video.embed_link);\n    },\n    deleteFunc() {\n      this.$vs.loading({\n        container: \"#div-with-loading\",\n        scale: 0.6,\n      });\n      let contID = this.delAct;\n      this.$store\n        .dispatch(\"deleteVideo\", contID)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n\n          this.videos.records.splice(\n            this.videos.records.findIndex(function (i) {\n              return i.id === contID;\n            }),\n            1\n          );\n\n          //   console.log(this.videos.records);\n\n          this.$vs.notify({\n            icon: \"error\",\n            color: \"dark\",\n            position: \"bottom-center\",\n            title: \"Content deleted\",\n            text: \"Content was successfully deleted\",\n          });\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          if (err.response) {\n            this.$vs.notify({\n              title: \"Delete content\",\n              text: err.response.data.message,\n              color: \"warning\",\n              icon: \"error\",\n              position: \"bottom-center\",\n            });\n          } else {\n            this.$vs.notify({\n              title: \"Delete content\",\n              text: \"Unable to delete this content\",\n              color: \"dark\",\n              icon: \"error\",\n              position: \"bottom-center\",\n            });\n          }\n        });\n    },\n    getBl() {\n      this.$store.commit(\"pgLoading\", true);\n      this.getVideos(false);\n    },\n\n    getVideos(divLoad) {\n      if (divLoad) {\n        this.$vs.loading({\n          container: \"#div-with-loading\",\n          scale: 0.6,\n        });\n      }\n      let pageNo = this.table_options.current_page;\n      this.$store\n        .dispatch(\"getVideos\", pageNo)\n        .then((resp) => {\n          this.videos = resp.data;\n          //   console.log(resp.data.data);\n          if (divLoad) {\n            this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          }\n          this.videos = resp.data.data;\n\n          this.$store.commit(\"pgLoading\", false);\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          if (err.response) {\n            this.$vs.notify({\n              title: \"Get videos\",\n              text: err.response.data.message,\n              color: \"warning\",\n              icon: \"error\",\n              position: \"bottom-center\",\n            });\n          } else {\n            this.$vs.notify({\n              title: \"Get videos\",\n              text: \"Unable to get videos\",\n              color: \"dark\",\n              icon: \"error\",\n              position: \"bottom-center\",\n            });\n          }\n          this.$store.commit(\"pgLoading\", false);\n        });\n    },\n  },\n};\n</script>"],"sourceRoot":"src/views"}]}