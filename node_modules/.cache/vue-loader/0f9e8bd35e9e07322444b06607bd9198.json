{"remainingRequest":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/src/views/UpdateProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/src/views/UpdateProfile.vue","mtime":1600553567000},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/cache-loader/dist/cjs.js","mtime":1596790124748},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/babel-loader/lib/index.js","mtime":1596739166622},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/cache-loader/dist/cjs.js","mtime":1596790124748},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/vue-loader/lib/index.js","mtime":1596739192596}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport vSelect from \"vue-select\";\nexport default {\n  components: {\n    \"v-select\": vSelect,\n  },\n  data() {\n    return {\n      imgpreview: false,\n      adminImg: \"\",\n      imageDataUpload: \"\",\n      previewUrl: \"\",\n      adminImage: \"\",\n      adminType: [\"admin\", \"accounting\", \"customerCare\"],\n      admin: {\n        firstName: \"\",\n        lastName: \"\",\n        countryCode: \"\",\n        phoneNumber: \"\",\n        img: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n      },\n    };\n  },\n  mounted() {\n    let adminData = JSON.parse(localStorage.getItem(\"adminData\"));\n    // console.log(adminData);\n    this.admin = {\n      firstName: adminData.firstName,\n      lastName: adminData.lastName,\n      countryCode: adminData.countryCode,\n      phoneNumber: adminData.phoneNumber,\n    };\n    this.adminImage = adminData.imgx400;\n  },\n  methods: {\n    openLoadingInDiv() {\n      this.$vs.loading({\n        container: \"#div-with-loading\",\n        scale: 0.6,\n      });\n    },\n    handleFileChange: function (event) {\n      //   console.log(event.target.files[0]);\n      const file = event.target.files[0];\n      this.imageDataUpload = file;\n      this.previewUrl = URL.createObjectURL(file);\n      this.imgpreview = true;\n      //   this.church.Logo = event.target.files[0];\n    },\n    saveImageUpload() {\n      this.openLoadingInDiv();\n      let profileImage = {\n        image: this.imageDataUpload,\n      };\n      this.$store\n        .dispatch(\"updateProfileImage\", profileImage)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          this.resetAdminStorage();\n          this.$vs.notify({\n            title: \"Profile Image\",\n            text: \"Profile Image updated successfully!\",\n            color: \"success\",\n          });\n          this.imgpreview = false;\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Profile Image\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Profile Image\",\n                text: \"Unable to edit profile image, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Profile Image\",\n              text: \"Unable to edit profile image, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n\n    changeImage() {\n      document.getElementById(\"fileUpload\").click();\n      //   console.log(event.target.files[0]);\n      //   this.church.Logo = event.target.files[0];\n    },\n    resetAdminStorage() {\n      this.$store\n        .dispatch(\"getAdmin\")\n        .then((resp) => {\n          this.$router.go(0);\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n        });\n    },\n    submitForm() {\n      this.openLoadingInDiv();\n      console.log(this.admin);\n      let editAdmin = this.admin;\n      this.$store\n        .dispatch(\"editAdminAccount\", editAdmin)\n        .then((resp) => {\n          //        console.log(resp.data);\n          this.resetAdminStorage();\n          this.$vs.notify({\n            title: \"Edit Admin Account\",\n            text: \"Admin Account editted successfully!\",\n            color: \"success\",\n          });\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Edit Admin Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Edit Admin Account\",\n                text: \"Unable to Update Profile, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Edit Admin Account\",\n              text: \"Unable to Update Profile, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n  },\n};\n",{"version":3,"sources":["UpdateProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpdateProfile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <vs-card class=\"p-5\">\n    <a href=\"javascript:void()\" @click=\"$router.go(-1)\">‚Üê Back</a>\n    <h4 class=\"inline-block ml-2\">Update Admin Profile</h4>\n    <div class=\"contained-example-container vs-con-loading__container\" id=\"div-with-loading\">\n      <div class=\"vx-row\">\n        <div class=\"vx-col w-full lg:w-1/4 xl:w-1/4\">\n          <div class=\"churchimg\">\n            <div class=\"img-container mt-6 pt-4 text-center\">\n              <img v-if=\"imgpreview\" :src=\"previewUrl\" class=\"logowidth\" />\n              <div v-else>\n                <img\n                  v-if=\"adminImage\"\n                  :src=\"'https://d2meuqd6gjekk6.cloudfront.net/'+adminImage\"\n                  class=\"logowidth\"\n                />\n              </div>\n              <div class=\"mt-5\">\n                <div class v-if=\"imgpreview\">\n                  <vs-button\n                    @click=\"saveImageUpload()\"\n                    color=\"warning\"\n                    type=\"filled\"\n                    class=\"mr-2 mb-2\"\n                  >Save Image</vs-button>\n                  <vs-button @click=\"imgpreview = false\" color=\"danger\" type=\"flat\">Cancel</vs-button>\n                </div>\n                <div v-else>\n                  <input id=\"fileUpload\" @change=\"handleFileChange($event)\" type=\"file\" hidden />\n                  <vs-button\n                    @click=\"changeImage()\"\n                    color=\"dark\"\n                    type=\"filled\"\n                    class=\"mr-2 mb-2\"\n                  >Change Image</vs-button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"vx-col w-full lg:w-3/4 xl:w-3/4\">\n          <form class=\"mt-4\">\n            <div class=\"vx-row\">\n              <div class=\"vx-col w-1/2 pt-3\">\n                <vs-input\n                  label-placeholder=\"First Name\"\n                  v-model=\"admin.firstName\"\n                  name=\"input1\"\n                  class=\"w-full mt-5\"\n                />\n              </div>\n              <div class=\"vx-col w-1/2 pt-3\">\n                <vs-input\n                  label-placeholder=\"Last Name\"\n                  v-model=\"admin.lastName\"\n                  name=\"input1\"\n                  class=\"w-full mt-5\"\n                />\n              </div>\n\n              <div class=\"vx-col w-1/2 pt-3\">\n                <vs-input\n                  label-placeholder=\"Country Code\"\n                  v-model=\"admin.countryCode\"\n                  name=\"input1\"\n                  class=\"w-full mt-5\"\n                />\n              </div>\n\n              <div class=\"vx-col w-1/2 pt-3\">\n                <vs-input\n                  label-placeholder=\"Phone Number\"\n                  v-model=\"admin.phoneNumber\"\n                  name=\"input1\"\n                  class=\"w-full mt-5\"\n                />\n              </div>\n              <!-- <div class=\"vx-col w-1/2 pt-3\">\n                <vs-input\n                  label-placeholder=\"Email\"\n                  v-model=\"admin.email\"\n                  name=\"input1\"\n                  type=\"email\"\n                  class=\"w-full mt-5\"\n                />\n              </div>-->\n            </div>\n            <vs-button type=\"filled\" @click.prevent=\"submitForm\" class=\"mt-5 block\">Update Profile</vs-button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </vs-card>\n</template>\n<script>\nimport vSelect from \"vue-select\";\nexport default {\n  components: {\n    \"v-select\": vSelect,\n  },\n  data() {\n    return {\n      imgpreview: false,\n      adminImg: \"\",\n      imageDataUpload: \"\",\n      previewUrl: \"\",\n      adminImage: \"\",\n      adminType: [\"admin\", \"accounting\", \"customerCare\"],\n      admin: {\n        firstName: \"\",\n        lastName: \"\",\n        countryCode: \"\",\n        phoneNumber: \"\",\n        img: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n      },\n    };\n  },\n  mounted() {\n    let adminData = JSON.parse(localStorage.getItem(\"adminData\"));\n    // console.log(adminData);\n    this.admin = {\n      firstName: adminData.firstName,\n      lastName: adminData.lastName,\n      countryCode: adminData.countryCode,\n      phoneNumber: adminData.phoneNumber,\n    };\n    this.adminImage = adminData.imgx400;\n  },\n  methods: {\n    openLoadingInDiv() {\n      this.$vs.loading({\n        container: \"#div-with-loading\",\n        scale: 0.6,\n      });\n    },\n    handleFileChange: function (event) {\n      //   console.log(event.target.files[0]);\n      const file = event.target.files[0];\n      this.imageDataUpload = file;\n      this.previewUrl = URL.createObjectURL(file);\n      this.imgpreview = true;\n      //   this.church.Logo = event.target.files[0];\n    },\n    saveImageUpload() {\n      this.openLoadingInDiv();\n      let profileImage = {\n        image: this.imageDataUpload,\n      };\n      this.$store\n        .dispatch(\"updateProfileImage\", profileImage)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          this.resetAdminStorage();\n          this.$vs.notify({\n            title: \"Profile Image\",\n            text: \"Profile Image updated successfully!\",\n            color: \"success\",\n          });\n          this.imgpreview = false;\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Profile Image\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Profile Image\",\n                text: \"Unable to edit profile image, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Profile Image\",\n              text: \"Unable to edit profile image, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n\n    changeImage() {\n      document.getElementById(\"fileUpload\").click();\n      //   console.log(event.target.files[0]);\n      //   this.church.Logo = event.target.files[0];\n    },\n    resetAdminStorage() {\n      this.$store\n        .dispatch(\"getAdmin\")\n        .then((resp) => {\n          this.$router.go(0);\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n        });\n    },\n    submitForm() {\n      this.openLoadingInDiv();\n      console.log(this.admin);\n      let editAdmin = this.admin;\n      this.$store\n        .dispatch(\"editAdminAccount\", editAdmin)\n        .then((resp) => {\n          //        console.log(resp.data);\n          this.resetAdminStorage();\n          this.$vs.notify({\n            title: \"Edit Admin Account\",\n            text: \"Admin Account editted successfully!\",\n            color: \"success\",\n          });\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Edit Admin Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Edit Admin Account\",\n                text: \"Unable to Update Profile, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Edit Admin Account\",\n              text: \"Unable to Update Profile, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n  },\n};\n</script>\n"]}]}