{"remainingRequest":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/src/views/AccountWithdrawals.vue?vue&type=style&index=0&id=c130cdaa&lang=scss&scoped=true&","dependencies":[{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/src/views/AccountWithdrawals.vue","mtime":1600553567000},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/css-loader/index.js","mtime":1596790125351},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1596739192596},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/postcss-loader/src/index.js","mtime":1596739188142},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/sass-loader/dist/cjs.js","mtime":1596790186435},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/cache-loader/dist/cjs.js","mtime":1596790124748},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/vue-loader/lib/index.js","mtime":1596739192596}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.mb-base {\n  margin-bottom: 1.2rem !important;\n}\n",{"version":3,"sources":["AccountWithdrawals.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+RA;AACA;AACA","file":"AccountWithdrawals.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"html\">\n  <div>\n    <vs-card>\n         <div slot=\"header\">\n          <h3 class=\"m-2\">\n           Account Withdrawals Requests\n          </h3>\n        </div>\n\n          <vs-table\n          id=\"div-with-transactions\"\n           class=\"vs-con-loading__container mx-4\"\n          search\n          max-items=\"5\"\n          pagination\n          :data=\"allWithdrawals\"\n        >\n          <template slot=\"thead\">\n            <vs-th>Date created</vs-th>\n            <vs-th>Church Name</vs-th>\n            <vs-th>Amount</vs-th>\n            <vs-th>Bank Name</vs-th>\n            <vs-th>Status</vs-th>\n            <vs-th>Mode of Payment</vs-th>\n            <vs-th>Action</vs-th>\n          </template>\n\n          <template slot-scope=\"{data}\">\n  <vs-tr :key=\"index\" v-for=\"(tr, index) in data\">\n    <vs-td :data=\"tr.createdAt\">{{ tr.createdAt | formatDate }}</vs-td>\n    <vs-td :data=\"tr.churchId\">{{tr.churchId.name}}</vs-td>\n    <vs-td :data=\"tr.amount\">{{tr.amount | currency('â‚¦', 0)}}</vs-td>\n    <vs-td :data=\"tr.bankId.bankName\">{{tr.bankId.bankName}}</vs-td>\n    <vs-td :data=\"tr.status\">\n      <vs-chip color=\"warning\">\n        <span class=\"uppercase\">{{tr.status}}</span>\n      </vs-chip>\n    </vs-td>\n    <vs-td :data=\"tr.modeOfPayment\">\n      <span class=\"capitalize\">{{tr.modeOfPayment}}</span>\n    </vs-td>\n    <vs-td>\n      <vs-button\n        @click=\"viewRequest(tr._id)\"\n        color=\"primary\"\n        type=\"filled\"\n        size=\"small\"\n        class=\"mr-2 mb-2\"\n      >View Request</vs-button>\n    </vs-td>\n  </vs-tr>\n</template>\n        </vs-table>\n    </vs-card>\n\n        <!-- Transaction Pop-up -->\n      <vs-popup class=\"holamundo\" title=\"Withdrawal Request\" :active.sync=\"transactionPopUp\">\n        <div id=\"div-with-mode\" class=\"vs-con-loading__container\">\n        <div class=\"vx-row px-2\">\n          <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n            <p class=\"mb-4 pl-2\">\n              <span class=\"font-bold\">Date -</span>\n              {{transactionSingle.date | formatDate}}\n            </p>\n            </div>\n            <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n                <div class=\"text-right mb-3\">\n                <vs-button\n                    @click=\"requestAction('approve', transactionSingle._id)\"\n                    color=\"primary\"\n                    type=\"filled\"\n                   \n                    class=\"mr-2 mb-2\"\n                  >Approve</vs-button>\n                  <vs-button\n                    @click=\"requestAction('reject',transactionSingle._id)\"\n                    color=\"primary\"\n                    type=\"border\"\n                   \n                    class=\"mr-2 mb-2\"\n                  >Reject</vs-button>\n                </div>  \n            </div>\n          </div>\n\n         <div class=\"vx-row px-2\">\n          <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n            <div class=\"walletinfocard\">\n              <h3 class=\"font-bold\">{{transactionSingle.currency}} {{transactionSingle.amount}}</h3>\n              <p class=\"text-danger\">Amount</p>\n              <p>\n                <span class=\"text-danger\">Mode of Payment -</span>\n                <span class=\"capitalize\"> {{transactionSingle.modeOfPayment }}</span>\n              </span>\n              </p>\n            </div>\n          </div>\n          <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n            <div class=\"walletinfocard\">\n              <vs-list-item\n                :title=\"churchPrev.name\"\n                :subtitle=\"churchPrev.email\"\n              >\n               <template slot=\"avatar\">\n  <img width=\"50\" class=\"pr-2\" :src=\"'https://d2meuqd6gjekk6.cloudfront.net/'+churchPrev.imgx400\" />\n</template>\n              </vs-list-item>\n            </div>\n          </div>\n        </div>\n\n        <vs-list>\n           <div class=\"mb-5 mt-3\">\n            <vs-list-header title=\"Church Information\"></vs-list-header>\n\n            <vs-list-item\n              title=\"Church Name\"\n              :subtitle=\"churchPrev.name\"\n            ></vs-list-item>\n            <vs-list-item title=\"Email\" :subtitle=\"churchPrev.email\"></vs-list-item>\n            <vs-list-item title=\"Pastor\" :subtitle=\"churchPrev.email\"></vs-list-item>\n            <vs-list-item title=\"Email\" :subtitle=\"churchPrev.pastor\"></vs-list-item>\n            <vs-list-item title=\"Country\" :subtitle=\"churchPrev.country\"></vs-list-item>\n\n            <vs-list-header class='mt-3' title=\"Bank Information\"></vs-list-header>\n            <vs-list-item title=\"Bank Name\" :subtitle=\"BankInfo.bankName\"></vs-list-item>\n            <vs-list-item title=\"Bank Code\" :subtitle=\"BankInfo.bankCode\"></vs-list-item>\n            <vs-list-item title=\"Account Type\" :subtitle=\"BankInfo.type\"></vs-list-item>\n            <vs-list-item title=\"Account Number\" :subtitle=\"BankInfo.accountNumber\"></vs-list-item>\n            <vs-list-item title=\"Account Name\" :subtitle=\"BankInfo.accountName\"></vs-list-item>\n            \n\n          </div>  \n        </vs-list>\n </div>\n      </vs-popup>\n  </div>\n</template>\n\n<script>\nimport StatisticsCardLine from \"@/components/statistics-cards/StatisticsCardLine.vue\";\nexport default {\n  components: {\n    StatisticsCardLine,\n  },\n  data: () => ({\n    allWithdrawals: [],\n    transactionPopUp: false,\n    churchPrev: {},\n    BankInfo: {},\n    transactionSingle: {\n      transCostAtCreatedTime: \"\",\n      transCostAmount: \"\",\n      _id: \"\",\n      txRef: \"\",\n      churchId: {\n        type: \"\",\n        imgx150: \"\",\n        imgx250: \"\",\n        imgx400: \"\",\n        img: \"\",\n        _id: \"\",\n        name: \"\",\n        email: \"\",\n        pastor: \"\",\n        country: \"\",\n      },\n      currency: \"\",\n      bankId: {\n        verified: \"\",\n        _id: \"\",\n        bankCode: \"\",\n        country: \"\",\n        bankName: \"\",\n        type: \"\",\n        accountNumber: \"\",\n        churchId: \"\",\n        accountName: \"\",\n        otpCode: \"\",\n        otpExpired: \"\",\n        createdAt: \"\",\n        updatedAt: \"\",\n        __v: \"\",\n      },\n      amount: \"\",\n      currencyId: \"\",\n      type: \"\",\n      modeOfPayment: \"\",\n      ip: \"\",\n      status: \"\",\n      createdAt: \"\",\n      updatedAt: \"\",\n      __v: \"\",\n    },\n  }),\n  mounted() {\n    this.openLoadingInTrans();\n    this.getAllWithdrawals();\n  },\n  methods: {\n    openLoadingInTrans() {\n      this.$vs.loading({\n        container: \"#div-with-transactions\",\n        scale: 0.6,\n      });\n    },\n    openLoadingInMode() {\n      this.$vs.loading({\n        container: \"#div-with-mode\",\n        scale: 0.6,\n      });\n    },\n    getAllWithdrawals() {\n      this.$store\n        .dispatch(\"getAllWithdrawalsPending\")\n        .then((resp) => {\n          this.allWithdrawals = resp.data.transaction;\n          // console.log(resp.data);\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n        })\n        .catch((err) => {\n          this.$vs.notify({\n            title: \"Load Withdrawals\",\n            text: \"Unable to Load All Withdrawals!\",\n            color: \"danger\",\n          });\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n        });\n    },\n    onCopyToken() {\n      this.$vs.notify({\n        text: \"Token Copied\",\n        color: \"success\",\n      });\n    },\n    onErrorToken() {\n      this.$vs.notify({\n        text: \"Error copying token\",\n        color: \"success\",\n      });\n    },\n    viewRequest(transactionid) {\n      this.transactionPopUp = true;\n      this.transactionSingle = this.allWithdrawals.find(\n        (transaction) => transaction._id == transactionid\n      );\n      this.churchPrev = this.transactionSingle.churchId;\n      this.BankInfo = this.transactionSingle.bankId;\n      // console.log(this.transactionSingle);\n    },\n    requestAction(mode, withdrawalID) {\n      this.openLoadingInMode();\n      if (mode == \"approve\") {\n        let requestMode = {\n          id: withdrawalID,\n          data: {\n            status: \"approved\",\n          },\n        };\n        this.$store\n          .dispatch(\"withdrawalDisburse\", requestMode)\n          .then((resp) => {\n            this.$vs.loading.close(\"#div-with-mode > .con-vs-loading\");\n            this.$vs.notify({\n              title: \"Withdrawal Disburse\",\n              text: \"Withdrawal Request approved\",\n              color: \"success\",\n            });\n            this.transactionPopUp = false;\n            this.getAllWithdrawals();\n          })\n          .catch((err) => {\n            this.$vs.notify({\n              title: \"Withdrawal Disburse\",\n              text: \"Unable to make changes, Try again\",\n              color: \"danger\",\n            });\n            this.$vs.loading.close(\"#div-with-mode > .con-vs-loading\");\n          });\n      } else {\n        //        console.log(mode);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.mb-base {\n  margin-bottom: 1.2rem !important;\n}\n</style>"]}]}