{"remainingRequest":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/src/views/ViewBranch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/src/views/ViewBranch.vue","mtime":1600553567000},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/cache-loader/dist/cjs.js","mtime":1596790124748},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/babel-loader/lib/index.js","mtime":1596739166622},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/cache-loader/dist/cjs.js","mtime":1596790124748},{"path":"/Users/adeniranopeyemi/Documents/Horpey/Projects/Baby Diary Admin/node_modules/vue-loader/lib/index.js","mtime":1596739192596}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ECharts from \"vue-echarts/components/ECharts\";\nimport \"echarts/lib/component/tooltip\";\nimport \"echarts/lib/component/legend\";\nimport \"echarts/lib/chart/bar\";\nimport \"echarts/lib/chart/pie\";\nexport default {\n  data() {\n    return {\n      branchInfo: {},\n      totalAmt: 0,\n      transactionInfo: [],\n      transactionPopUp: false,\n      withdrawalsInfo: [],\n      transactionSingle: {\n        date: \"\",\n        totalamt: \"\",\n        membername: \"\",\n        avatar: \"\",\n        memberemail: \"\",\n        description: \"\",\n        mode: \"\",\n        gateway: \"\",\n        recursive: \"\",\n        transref: \"\",\n        type: \"\",\n        wallet: {\n          amount: \"\",\n          name: \"\",\n          verified: \"\",\n        },\n      },\n      walletInfo: {},\n      walletChart: {\n        tooltip: {\n          trigger: \"item\",\n          formatter: \"{a} <br/>{b} : {c} ({d}%)\",\n        },\n        legend: {\n          orient: \"vertical\",\n          left: \"left\",\n          data: [],\n        },\n        series: [\n          {\n            name: \"Customers\",\n            type: \"pie\",\n            radius: \"55%\",\n            center: [\"50%\", \"60%\"],\n            color: [\n              \"#0f163a\",\n              \"#768cff\",\n              \"#473DC1\",\n              \"#0DAC99\",\n              \"#27CB98\",\n              \"#D5C723\",\n              \"#DA52E5\",\n              \"#F59781\",\n            ],\n            data: [],\n            itemStyle: {\n              emphasis: {\n                shadowBlur: 7,\n                shadowOffsetX: 0,\n                shadowColor: \"rgba(0, 0, 0, 0.2)\",\n              },\n            },\n          },\n        ],\n      },\n    };\n  },\n  components: {\n    ECharts,\n  },\n  methods: {\n    openLoadingInDiv() {\n      this.$vs.loading({\n        container: \"#div-with-loading\",\n        scale: 0.6,\n      });\n    },\n    openLoadingInTransactions() {\n      this.$vs.loading({\n        container: \"#div-with-transactions\",\n        scale: 0.6,\n      });\n    },\n    openLoadingInWAllet() {\n      this.$vs.loading({\n        container: \"#div-with-wallet\",\n        scale: 0.6,\n      });\n    },\n    confirmDeleteRecord() {\n      this.$vs.dialog({\n        type: \"confirm\",\n        color: \"danger\",\n        title: \"Confirm Delete\",\n        text: `You are about to delete \"${this.branchInfo.name}\"`,\n        accept: this.deleteAccount,\n        acceptText: \"Delete\",\n      });\n    },\n    showDeleteSuccess() {\n      this.$vs.notify({\n        color: \"success\",\n        title: \"Account Deleted\",\n        text: \"The selected church account was successfully deleted\",\n      });\n    },\n    deleteAccount() {\n      this.openLoadingInDiv();\n      let churchId = this.branchInfo._id;\n      this.$store\n        .dispatch(\"deleteChurch\", churchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          // console.log(resp);\n          this.showDeleteSuccess();\n          this.$router.back();\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          //        console.log(err.response);\n          if (err.response) {\n            if (err.response.status == 400) {\n              // console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: \"Unable to delete church account, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Church Account\",\n              text: \"Unable to delete church account, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getWithdrawalsList() {\n      const churchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getChurchWithdr\", churchId)\n        .then((resp) => {\n          // this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          this.withdrawalsInfo = resp.data.transaction;\n          // console.log(resp.data.transaction);\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Church Withdrawals\",\n                text: \"Unable to load church withdrawals, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Church Withdrawals\",\n              text: \"Unable to load church withdrawals, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getBranchTransaction() {\n      const branchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getBranchTransaction\", branchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          this.transactionInfo = resp.data.transaction;\n          // console.log(this.transactionInfo);\n          // console.log(resp.data.transaction);\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Church Wallet\",\n                text: \"Unable to load church transactions, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Church Account\",\n              text: \"Unable to load church transactions, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getWalletInfo() {\n      const branchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getBranchWallet\", branchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-wallet > .con-vs-loading\");\n          this.walletInfo = resp.data;\n          // console.log(this.walletInfo);\n          for (let i = 0; i < this.walletInfo.length; i++) {\n            this.walletChart.legend.data.push(this.walletInfo[i].name);\n            let chartData = {\n              value: this.walletInfo[i].amount,\n              name: this.walletInfo[i].name,\n            };\n            this.totalAmt += this.walletInfo[i].amount;\n            this.walletChart.series[0].data.push(chartData);\n          }\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-wallet > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Branch Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Branch Wallet\",\n                text: \"Unable to load branch wallet, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Branch Account\",\n              text: \"Unable to load church wallet, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getBranchInfo() {\n      const branchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getBranchDetails\", branchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          this.branchInfo = resp.data;\n          // console.log(resp);\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Branch Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Branch Account\",\n                text: \"Unable to load brancj details, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Branch Account\",\n              text: \"Unable to load branch details, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n  },\n  mounted() {\n    this.openLoadingInDiv();\n    this.getBranchInfo();\n    this.openLoadingInTransactions();\n    this.getWalletInfo();\n    this.getBranchTransaction();\n    this.getWithdrawalsList();\n  },\n};\n",{"version":3,"sources":["ViewBranch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ViewBranch.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"page-user-view\">\n    <div id=\"user-data\">\n      <vx-card class=\"mb-4 vs-con-loading__container\" id=\"div-with-loading\">\n        <div class=\"mb-8\">\n          <a href=\"javascript:void()\" @click=\"$router.go(-1)\">← Back</a>\n        </div>\n        <!-- Avatar -->\n        <div class=\"vx-row\">\n          <!-- Avatar Col -->\n          <div class=\"vx-col\" id=\"avatar-col\">\n            <div class=\"img-container mb-4\">\n              <img\n                v-if=\"branchInfo.img\"\n                :src=\"'https://d2meuqd6gjekk6.cloudfront.net/'+branchInfo.img\"\n                class=\"logowidth\"\n              />\n            </div>\n          </div>\n\n          <!-- Information - Col 1 -->\n          <div class=\"vx-col flex-1\" id=\"account-info-col-1\">\n            <table>\n              <tr>\n                <td class=\"font-semibold\">Church Name</td>\n                <td>{{branchInfo.name}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Location</td>\n                <td>{{branchInfo.region}} {{branchInfo.state}},{{branchInfo.country}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Address</td>\n                <td>{{branchInfo.address}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Email</td>\n                <td>\n                  <a :href=\"'mailto:'+branchInfo.email\" target=\"_blank\">{{branchInfo.email}}</a>\n                </td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Stream URL</td>\n                <td>\n                  <a :href=\"branchInfo.streamURL\" target=\"_blank\">{{branchInfo.streamURL}}</a>\n                </td>\n              </tr>\n            </table>\n            <div class=\"vx-col w-full flex mt-5\" id=\"account-manage-buttons\">\n              <vs-button\n                icon-pack=\"feather\"\n                icon=\"icon-edit\"\n                class=\"mr-4\"\n                @click=\"$router.push({\n                  path: '/edit-branch/'+branchInfo._id,\n                  query: {  _id: branchInfo._id },\n                })\"\n              >Edit</vs-button>\n              <vs-button\n                type=\"border\"\n                color=\"danger\"\n                icon-pack=\"feather\"\n                icon=\"icon-trash\"\n                @click=\"confirmDeleteRecord\"\n              >Delete</vs-button>\n            </div>\n          </div>\n          <!-- /Information - Col 1 -->\n\n          <!-- Information - Col 2 -->\n          <div class=\"vx-col flex-1\" id=\"account-info-col-2\">\n            <table>\n              <tr>\n                <td class=\"font-semibold\">Pastor</td>\n                <td>{{branchInfo.pastor}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Mobile Number</td>\n                <td>{{branchInfo.countryCode}}{{branchInfo.phoneNumber}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Zone</td>\n                <td>{{branchInfo.zone}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Region</td>\n                <td>{{branchInfo.region}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Setup Fee in Naira</td>\n                <td>{{branchInfo.setupFeeNaira | currency('₦',0)}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Setup Fee in Dollars</td>\n                <td>{{branchInfo.setupFeeDollar | currency('$',0)}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Subscription Fee in Naira</td>\n                <td>{{branchInfo.subscriptionFeeNaira | currency('₦',0)}}</td>\n              </tr>\n              <tr>\n                <td class=\"font-semibold\">Subscription Fee in Dollar</td>\n                <td>{{branchInfo.subscriptionFeeDollar | currency('$',0)}}</td>\n              </tr>\n            </table>\n          </div>\n          <!-- /Information - Col 2 -->\n        </div>\n      </vx-card>\n\n      <div class=\"vx-row\">\n        <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n          <vx-card\n            class=\"mb-base vs-con-loading__container\"\n            title=\"Church Wallet\"\n            id=\"div-with-wallet\"\n          >\n            <div class=\"vx-row\">\n              <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-3\">\n                <div class=\"walletinfocard\">\n                  <h3 class=\"font-bold\">{{totalAmt | currency('₦', 0)}}</h3>\n                  <p class=\"text-danger\">Total</p>\n                </div>\n              </div>\n              <div\n                v-for=\"(wallet,index) in walletInfo\"\n                :key=\"index\"\n                class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-3\"\n              >\n                <div class=\"walletinfocard\">\n                  <h3 class=\"font-bold\">{{wallet.amount | currency('₦', 0)}}</h3>\n                  <p class=\"text-danger\">{{wallet.name}}</p>\n                </div>\n              </div>\n            </div>\n          </vx-card>\n        </div>\n        <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n          <vx-card\n            :title=\"'Wallet History'\"\n            class=\"mb-base vs-con-loading__container\"\n            id=\"div-with-wallet\"\n          >\n            <div class style=\"min-height: 240px;\">\n              <e-charts\n                style=\"min-height: 240px\"\n                class=\"piechartheight\"\n                autoresize\n                :options=\"walletChart\"\n                ref=\"pie\"\n                auto-resize\n              />\n            </div>\n          </vx-card>\n        </div>\n      </div>\n      <vx-card :title=\"'Wallet Transactions'\" class=\"mb-base vs-con-loading__container\">\n        <vs-table\n          id=\"div-with-transactions\"\n          search\n          max-items=\"5\"\n          pagination\n          :data=\"transactionInfo\"\n        >\n          <template slot=\"thead\">\n            <!-- <vs-th sort-key=\"email\">Id</vs-th> -->\n            <!-- <vs-th>Id</vs-th> -->\n            <vs-th>Date created</vs-th>\n            <vs-th>Member</vs-th>\n            <vs-th>Description</vs-th>\n            <vs-th>Amount</vs-th>\n            <vs-th>Status</vs-th>\n            <vs-th>Type</vs-th>\n            <vs-th>Action</vs-th>\n          </template>\n\n          <template slot-scope=\"{data}\">\n            <vs-tr :key=\"index\" v-for=\"(tr, index) in data\">\n              <!-- <vs-td :data=\"tr.id\">{{ index + 1 }}</vs-td> -->\n              <vs-td :data=\"tr.createdAt\">{{ tr.createdAt | formatDate }}</vs-td>\n              <vs-td :data=\"tr.memberId.fullName\">{{ tr.memberId.fullName }}</vs-td>\n              <vs-td :data=\"tr.description\">{{tr.description}}</vs-td>\n              <vs-td :data=\"tr.amount\">{{tr.currency}} {{tr.amount | currency('₦', 0)}}</vs-td>\n              <vs-td :data=\"tr.status\">\n                <vs-chip>\n                  <span class=\"uppercase\">{{tr.status}}</span>\n                </vs-chip>\n              </vs-td>\n              <vs-td :data=\"tr.type\">\n                <span class=\"capitalize\">{{tr.type}}</span>\n              </vs-td>\n              <vs-td>\n                <vs-button\n                  @click=\"viewTransaction(tr._id)\"\n                  color=\"primary\"\n                  type=\"filled\"\n                  size=\"small\"\n                  class=\"mr-2 mb-2\"\n                >View</vs-button>\n              </vs-td>\n            </vs-tr>\n          </template>\n        </vs-table>\n      </vx-card>\n\n      <vx-card :title=\"'Withdrawal Transactions'\" class=\"mb-base vs-con-loading__container\">\n        <vs-table\n          id=\"div-with-transactions\"\n          search\n          max-items=\"5\"\n          pagination\n          :data=\"withdrawalsInfo\"\n        >\n          <template slot=\"thead\">\n            <!-- <vs-th sort-key=\"email\">Id</vs-th> -->\n            <!-- <vs-th>Id</vs-th> -->\n            <vs-th>Date created</vs-th>\n            <vs-th>Member</vs-th>\n            <vs-th>Description</vs-th>\n            <vs-th>Amount</vs-th>\n            <vs-th>Status</vs-th>\n            <vs-th>Type</vs-th>\n            <!-- <vs-th>Action</vs-th> -->\n          </template>\n\n          <template slot-scope=\"{data}\">\n            <vs-tr :key=\"index\" v-for=\"(tr, index) in data\">\n              <!-- <vs-td :data=\"tr.id\">{{ index + 1 }}</vs-td> -->\n              <vs-td :data=\"tr.createdAt\">{{ tr.createdAt | formatDate }}</vs-td>\n              <vs-td :data=\"tr.memberId.fullName\">{{ tr.memberId.fullName }}</vs-td>\n              <vs-td :data=\"tr.description\">{{tr.description}}</vs-td>\n              <vs-td :data=\"tr.amount\">{{tr.amount | currency('₦', 0)}}</vs-td>\n              <vs-td :data=\"tr.status\">\n                <vs-chip>\n                  <span class=\"uppercase\">{{tr.status}}</span>\n                </vs-chip>\n              </vs-td>\n              <vs-td :data=\"tr.type\">\n                <span class=\"capitalize\">{{tr.type}}</span>\n              </vs-td>\n              <!-- <vs-td>\n                <vs-button\n                  @click=\"viewTransaction(tr._id)\"\n                  color=\"primary\"\n                  type=\"filled\"\n                  size=\"small\"\n                  class=\"mr-2 mb-2\"\n                >View</vs-button>\n              </vs-td>-->\n            </vs-tr>\n          </template>\n        </vs-table>\n      </vx-card>\n\n      <!-- Transaction Pop-up -->\n      <vs-popup class=\"holamundo\" title=\"Transaction Details\" :active.sync=\"transactionPopUp\">\n        <p class=\"mb-4 pl-2\">\n          <span class=\"font-bold\">Date -</span>\n          {{transactionSingle.date | formatDate}}\n        </p>\n        <div class=\"vx-row px-2\">\n          <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n            <div class=\"walletinfocard\">\n              <h3 class=\"font-bold\">{{transactionSingle.totalamt | currency('₦', 0)}}</h3>\n              <p class=\"text-danger\">Total</p>\n            </div>\n          </div>\n          <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2\">\n            <div class=\"walletinfocard\">\n              <vs-list-item\n                :title=\"transactionSingle.membername\"\n                :subtitle=\"transactionSingle.memberemail\"\n              >\n                <template slot=\"avatar\">\n                  <vs-avatar\n                    :src=\"'https://d2meuqd6gjekk6.cloudfront.net/'+transactionSingle.avatar\"\n                  />\n                </template>\n              </vs-list-item>\n            </div>\n          </div>\n        </div>\n\n        <vs-list>\n          <vs-list-item title=\"Description\" :subtitle=\"transactionSingle.description\"></vs-list-item>\n          <vs-list-item title=\"Mode of Payment\" :subtitle=\"transactionSingle.mode\"></vs-list-item>\n          <vs-list-item title=\"Payment GateWay\" :subtitle=\"transactionSingle.gateway\"></vs-list-item>\n          <vs-list-item title=\"Recursive\" :subtitle=\"transactionSingle.recursive\"></vs-list-item>\n          <vs-list-item title=\"Transaction Reference\" :subtitle=\"transactionSingle.transref\"></vs-list-item>\n          <vs-list-item title=\"Type\" :subtitle=\"transactionSingle.type\"></vs-list-item>\n\n          <div class=\"mb-5 mt-3\">\n            <vs-list-header title=\"Wallet Information\"></vs-list-header>\n            <vs-list-item\n              title=\"Amount\"\n              :subtitle=\"transactionSingle.wallet.amount | currency('₦', 0)\"\n            ></vs-list-item>\n            <vs-list-item title=\"Name\" :subtitle=\"transactionSingle.wallet.name\"></vs-list-item>\n            <vs-list-item title=\"Verified\" :subtitle=\"transactionSingle.wallet.verified\"></vs-list-item>\n          </div>\n        </vs-list>\n      </vs-popup>\n    </div>\n  </div>\n</template>\n<script>\nimport ECharts from \"vue-echarts/components/ECharts\";\nimport \"echarts/lib/component/tooltip\";\nimport \"echarts/lib/component/legend\";\nimport \"echarts/lib/chart/bar\";\nimport \"echarts/lib/chart/pie\";\nexport default {\n  data() {\n    return {\n      branchInfo: {},\n      totalAmt: 0,\n      transactionInfo: [],\n      transactionPopUp: false,\n      withdrawalsInfo: [],\n      transactionSingle: {\n        date: \"\",\n        totalamt: \"\",\n        membername: \"\",\n        avatar: \"\",\n        memberemail: \"\",\n        description: \"\",\n        mode: \"\",\n        gateway: \"\",\n        recursive: \"\",\n        transref: \"\",\n        type: \"\",\n        wallet: {\n          amount: \"\",\n          name: \"\",\n          verified: \"\",\n        },\n      },\n      walletInfo: {},\n      walletChart: {\n        tooltip: {\n          trigger: \"item\",\n          formatter: \"{a} <br/>{b} : {c} ({d}%)\",\n        },\n        legend: {\n          orient: \"vertical\",\n          left: \"left\",\n          data: [],\n        },\n        series: [\n          {\n            name: \"Customers\",\n            type: \"pie\",\n            radius: \"55%\",\n            center: [\"50%\", \"60%\"],\n            color: [\n              \"#0f163a\",\n              \"#768cff\",\n              \"#473DC1\",\n              \"#0DAC99\",\n              \"#27CB98\",\n              \"#D5C723\",\n              \"#DA52E5\",\n              \"#F59781\",\n            ],\n            data: [],\n            itemStyle: {\n              emphasis: {\n                shadowBlur: 7,\n                shadowOffsetX: 0,\n                shadowColor: \"rgba(0, 0, 0, 0.2)\",\n              },\n            },\n          },\n        ],\n      },\n    };\n  },\n  components: {\n    ECharts,\n  },\n  methods: {\n    openLoadingInDiv() {\n      this.$vs.loading({\n        container: \"#div-with-loading\",\n        scale: 0.6,\n      });\n    },\n    openLoadingInTransactions() {\n      this.$vs.loading({\n        container: \"#div-with-transactions\",\n        scale: 0.6,\n      });\n    },\n    openLoadingInWAllet() {\n      this.$vs.loading({\n        container: \"#div-with-wallet\",\n        scale: 0.6,\n      });\n    },\n    confirmDeleteRecord() {\n      this.$vs.dialog({\n        type: \"confirm\",\n        color: \"danger\",\n        title: \"Confirm Delete\",\n        text: `You are about to delete \"${this.branchInfo.name}\"`,\n        accept: this.deleteAccount,\n        acceptText: \"Delete\",\n      });\n    },\n    showDeleteSuccess() {\n      this.$vs.notify({\n        color: \"success\",\n        title: \"Account Deleted\",\n        text: \"The selected church account was successfully deleted\",\n      });\n    },\n    deleteAccount() {\n      this.openLoadingInDiv();\n      let churchId = this.branchInfo._id;\n      this.$store\n        .dispatch(\"deleteChurch\", churchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          // console.log(resp);\n          this.showDeleteSuccess();\n          this.$router.back();\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          //        console.log(err.response);\n          if (err.response) {\n            if (err.response.status == 400) {\n              // console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: \"Unable to delete church account, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Church Account\",\n              text: \"Unable to delete church account, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getWithdrawalsList() {\n      const churchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getChurchWithdr\", churchId)\n        .then((resp) => {\n          // this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          this.withdrawalsInfo = resp.data.transaction;\n          // console.log(resp.data.transaction);\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Church Withdrawals\",\n                text: \"Unable to load church withdrawals, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Church Withdrawals\",\n              text: \"Unable to load church withdrawals, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getBranchTransaction() {\n      const branchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getBranchTransaction\", branchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          this.transactionInfo = resp.data.transaction;\n          // console.log(this.transactionInfo);\n          // console.log(resp.data.transaction);\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-transactions > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Church Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Church Wallet\",\n                text: \"Unable to load church transactions, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Church Account\",\n              text: \"Unable to load church transactions, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getWalletInfo() {\n      const branchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getBranchWallet\", branchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-wallet > .con-vs-loading\");\n          this.walletInfo = resp.data;\n          // console.log(this.walletInfo);\n          for (let i = 0; i < this.walletInfo.length; i++) {\n            this.walletChart.legend.data.push(this.walletInfo[i].name);\n            let chartData = {\n              value: this.walletInfo[i].amount,\n              name: this.walletInfo[i].name,\n            };\n            this.totalAmt += this.walletInfo[i].amount;\n            this.walletChart.series[0].data.push(chartData);\n          }\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-wallet > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Branch Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Branch Wallet\",\n                text: \"Unable to load branch wallet, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Branch Account\",\n              text: \"Unable to load church wallet, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n    getBranchInfo() {\n      const branchId = this.$route.query.branchId;\n      this.$store\n        .dispatch(\"getBranchDetails\", branchId)\n        .then((resp) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          this.branchInfo = resp.data;\n          // console.log(resp);\n        })\n        .catch((err) => {\n          this.$vs.loading.close(\"#div-with-loading > .con-vs-loading\");\n          //        console.log(err.response);\n\n          if (err.response) {\n            if (err.response.status == 400) {\n              //        console.log(err.response.data);\n              this.$vs.notify({\n                title: \"Branch Account\",\n                text: err.response.data,\n                color: \"warning\",\n              });\n            } else {\n              this.$vs.notify({\n                title: \"Branch Account\",\n                text: \"Unable to load brancj details, try again!\",\n                color: \"warning\",\n              });\n            }\n          } else {\n            this.$vs.notify({\n              title: \"Branch Account\",\n              text: \"Unable to load branch details, try again!\",\n              color: \"warning\",\n            });\n          }\n        });\n    },\n  },\n  mounted() {\n    this.openLoadingInDiv();\n    this.getBranchInfo();\n    this.openLoadingInTransactions();\n    this.getWalletInfo();\n    this.getBranchTransaction();\n    this.getWithdrawalsList();\n  },\n};\n</script>"]}]}